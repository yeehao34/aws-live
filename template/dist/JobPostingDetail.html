<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITP - Company Job Details</title>

    <link rel="stylesheet" href="assets/css/main/app.css">
    <link rel="stylesheet" href="assets/css/main/app-dark.css">
    <link rel="shortcut icon" href="assets/images/logo/favicon.svg" type="image/x-icon">
    <link rel="shortcut icon" href="assets/images/logo/favicon.png" type="image/png">

    <link rel="stylesheet" href=" https://github.com/downloads/lafeber/world-flags-sprite/flags32.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
</head>

<body>
    <div id="app">
        {# activePage is to determine which item to be active#}
        {% set activePage = "job" %}
        {% include "companySidebar.html" %}
        <div id="main" class='layout-navbar'>
            {% include "companyHeader.html" %}
            <div id="main-content">

                <div class="page-heading">
                    <div class="page-title">
                        <div class="row">
                            <div class="col-12 col-lg-9">
                                <h3>Add New Job Post</h3>
                                <p class="text-subtitle text-muted">Enter the following detail to add a new job post</p>

                            </div>
                            <div class="col-12 col-lg-3 d-flex justify-content-end align-items-end experience">
                                <button type="button" id="back" class="btn btn-secondary me-1 mb-1">
                                    Back
                                </button>
                                <button type="button" id="save" class="btn btn-primary me-1 mb-1">
                                    Save
                                </button>
                                <button type="button" id="edit" class="btn btn-primary me-1 mb-1">
                                    Edit
                                </button>
                                <button type="button" id="addJob" class="btn btn-primary me-1 mb-1">
                                    Add Job
                                </button>
                            </div>

                        </div>
                    </div>
                    <div id="main-content">
                        <form class="form" id="jobPostForm" data-parsley-validate>
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title">Job Information</h4>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-12 col-md-6">
                                            <div class="form-group mandatory">
                                                <label for="jobTitle" class="form-label">Job Title</label>
                                                <input type="text" id="jobTitle" class="form-control" name="jobTitle"
                                                    placeholder="e.g: Software Engineer" data-parsley-required="true" />
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <div class="form-group mb-3 mandatory">
                                                <label for="form-check" class="form-label">Open For</label>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="open"
                                                        id="diploma">
                                                    <label class="form-check-label" for="diploma">
                                                        Diploma
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="open"
                                                        id="degree">
                                                    <label class="form-check-label" for="degree">
                                                        Degree
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="open"
                                                        id="diplomaAndDegree" checked>
                                                    <label class="form-check-label" for="diplomaAndDegree">
                                                        Diploma and Degree
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="form-group mb-3 mandatory">
                                                <label for="jobDesc" class="form-label">Job Description</label>
                                                <textarea class="form-control" id="jobDesc" rows="8"
                                                    placeholder="Enter Job Description here. You may include qualification and job requirement"
                                                    name="jobDesc" data-parsley-required="true"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title">Job Specification</h4>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-12 col-md-6">
                                            <div class="form-group mandatory">
                                                <label for="allowance" class="form-label">Allowance (RM)</label>
                                                <input type="number" step="100" id="allowance" class="form-control"
                                                    name="allowance" placeholder="e.g: 1000"
                                                    data-parsley-required="true" />
                                            </div>
                                        </div>
                                        <div class="col-12 col-md-6">
                                            <div class="form-group mandatory">
                                                <label for="accessory" class="form-label">Accessory Provided</label>
                                                <small class="text-muted">Note: Please enter "None" if no accessory
                                                    provided</i></small>
                                                <input type="text" id="accessory" class="form-control" name="accessory"
                                                    placeholder="e.g: Laptop, Mouse, Keyboard"
                                                    data-parsley-required="true" />
                                            </div>
                                        </div>
                                        <div class="col-12 col-md-6">
                                            <div class="form-group mandatory">
                                                <label for="workDay" class="form-label">Working Day</label>
                                                <input type="text" id="workDay" class="form-control" name="workDay"
                                                    placeholder="e.g: Monday - Friday" data-parsley-required="true" />
                                            </div>
                                        </div>
                                        <div class="col-12 col-md-6">
                                            <div class="form-group mandatory">
                                                <label for="workHour" class="form-label">Working Day</label>
                                                <input type="text" id="workHour" class="form-control" name="workHour"
                                                    placeholder="e.g: 9.00am - 5.00pm" data-parsley-required="true" />
                                            </div>
                                        </div>
                                        <div class="col-12 col-md-6">
                                            <div class="form-group mandatory">
                                                <label for="accom" class="form-label">Accommodation Provided</label>
                                                <select class="form-select" name="accom" data-parsley-required="true">
                                                    <option value="Y">Yes</option>
                                                    <option value="N">No</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                {% include "footer.html" %}
            </div>
        </div>
    </div>
    <script src="assets/js/bootstrap.js"></script>
    <script src="assets/js/app.js"></script>
    <script src="assets/extensions/jquery/jquery.min.js"></script>
    <script src="assets/js/pages/simple-datatables.js"></script>
    <script src="assets/extensions/parsleyjs/parsley.min.js"></script>
    <script src="assets/js/pages/parsley.js"></script>

    <script>
        //define a job object
        var job = {
            jobTitle: "Software Engineer",
            jobDesc: "Develop software and Assist in software testing",
            allowance: 500,
            accessory: "None",
            workDay: "Monday - Saturday",
            workHour: "9am - 6pm",
            accom: "Y",
            Diploma: "Y",
            Degree: "Y"
        };

        //click save button
        $("#addJob").click(function () {
            //check if all field is filled
            if ($("#jobPostForm").parsley().validate()) {
                //get all value from form
                var jobTitle = $("#jobTitle").val();
                var jobDesc = $("#jobDesc").val();
                var allowance = $("#allowance").val();
                var accessory = $("#accessory").val();
                var workDay = $("#workDay").val();
                var workHour = $("#workHour").val();
                var accom = $("#accom").val();
                var open = $("input[name='open']:checked").val();

                //create new job post object
                var newJobPost = {
                    jobTitle: jobTitle,
                    jobDesc: jobDesc,
                    allowance: allowance,
                    accessory: accessory,
                    workDay: workDay,
                    workHour: workHour,
                    accom: accom,
                    open: open
                };

                //get all job post from local storage
                var jobPost = JSON.parse(localStorage.getItem("jobPost"));

                //if there is no job post in local storage, create new array
                if (jobPost == null) {
                    jobPost = [];
                }

                //push new job post into array
                jobPost.push(newJobPost);

                //save array into local storage
                localStorage.setItem("jobPost", JSON.stringify(jobPost));

                //redirect to job post list page
                window.location.href = "/jobPostList";
            }
        });
    </script>

</body>

</html>